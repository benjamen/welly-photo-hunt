
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wellington Evilâ€‘Mode Photo Hunt â€” Online Images + Timer</title>
  <style>
    html, body { height: 100%; }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans";
            background: #0b0f14; color: #e6edf3; }
    a { color: #8ab4f8; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .wrap { min-height: 100%; display: grid; grid-template-rows: auto 1fr auto; }
    header { padding: 16px 20px; display:flex; gap:12px; align-items:center; justify-content:space-between;
              background: linear-gradient(180deg,#0f1622 0%,#0b0f14 100%); border-bottom: 1px solid #1f2a36; position: sticky; top:0; z-index:10; }
    .title { font-size: clamp(18px,2.2vw,24px); font-weight: 700; letter-spacing: .3px; }
    .controls { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .btn { background:#1b2531; border:1px solid #2b3a4b; color:#e6edf3; padding:10px 14px; border-radius:14px; font-weight:600; cursor:pointer; }
    .btn:hover { background:#233142; border-color:#3a4d63; }
    .btn.primary { background:#2563eb; border-color:#1e4fd6; }
    .btn.primary:hover { background:#2b6af0; border-color:#2250c7; }
    .game { max-width:1050px; margin:28px auto; padding:0 20px 28px; display:grid; gap:18px; }
    .card { background: radial-gradient(1200px 600px at 50% -10%, rgba(62,104,155,.18), transparent 60%), #0d141c;
             border:1px solid #182330; border-radius:20px; overflow:hidden; }
    .imageFrame { height: clamp(260px,48vh,520px); background:#0f1722; display:grid; place-items:center; overflow:hidden; position:relative; }
    .cropBox { width:min(88%,820px); height:min(86%,480px); border-radius:18px; overflow:hidden; background-position:center; background-repeat:no-repeat; background-size:cover; border:1px solid rgba(255,255,255,.06);}
    .mask { position:absolute; inset:0; pointer-events:none; background: radial-gradient(60% 70% at 50% 50%, rgba(0,0,0,.12), rgba(0,0,0,.42)); }
    .hud { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px 20px; border-top:1px solid #182330; background:#0b0f14; flex-wrap:wrap; }
    .pill { padding:6px 10px; border-radius:999px; background:#14202c; border:1px solid #223142; font-size:14px; opacity:.85; }
    .pill.timer { background:#211b31; border-color:#3b2f63; }
    .clue { font-size: clamp(14px,1.7vw,18px); }
    .answer { padding:14px 18px; margin:0 20px 18px; border-radius:14px; background:#0e1722; border:1px dashed #29415c; display:none; line-height:1.45; font-size:15px; }
    footer { opacity:.7; font-size:12px; padding:14px 20px; text-align:center; border-top:1px solid #182330; }
    .timeup { color:#ffb4a2; font-weight:700; margin-left:8px; display:none; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">ðŸ§© Wellington Evilâ€‘Mode Photo Hunt â€” Online Images + Timer</div>
      <div class="controls">
        <button class="btn" id="revealBtn" title="Reveal the answer">Reveal</button>
        <button class="btn" id="nextBtn" title="Next image">Next</button>
        <button class="btn primary" id="shuffleBtn" title="Shuffle & restart">Restart</button>
      </div>
    </header>

    <main class="game">
      <section class="card">
        <div class="imageFrame">
          <div id="crop" class="cropBox" role="img" aria-label="Cropped Wellington landmark"></div>
          <div class="mask"></div>
        </div>
        <div class="hud">
          <div class="clue" id="clue">â€”</div>
          <div>
            <span class="pill timer" id="timer">30s</span><span class="timeup" id="timeup">Timeâ€™s up!</span>
            <span class="pill" id="progress">0 / 0</span>
            <span class="pill" id="score">Score: 0</span>
          </div>
        </div>
        <div class="answer" id="answer"></div>
      </section>

      <section class="card" style="padding:14px 18px;">
        <details>
          <summary>How to play</summary>
          <ul>
            <li>Guess the location from the crop + clue.</li>
            <li><b>Reveal</b> shows the answer and a link to the <i>full image</i>.</li>
            <li><b>Next</b> moves on. <b>Restart</b> shuffles the order.</li>
            <li>Timer: 30s per image. It <b>resets</b> when you hit <b>Reveal</b>, and on Next/Restart.</li>
            <li>Press <kbd>H</kbd> to hide clues. Press <kbd>S</kbd> to +1 score.</li>
          </ul>
        </details>
      </section>
    </main>
    <footer>All images hotâ€‘linked from Wikimedia Commons under their stated licenses.</footer>
  </div>

  <script>
    const items = [{"id": "beehive-roof", "clue": "Copper crown above the chamber where voices carry.", "answer": "The Beehive â€” roof detail", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/The_Beehive%2C_Wellington%2C_2018.jpg", "focusX": 58, "focusY": 12, "zoom": 600}, {"id": "bucket-fountain", "clue": "Built in 1969; notorious for splash damage.", "answer": "Bucket Fountain â€” Cuba Street", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/The_Bucket_Fountain%2C_Wellington.jpg", "focusX": 48, "focusY": 44, "zoom": 560}, {"id": "cable-car-track", "clue": "Funicular since 1902; look for the midâ€‘route flyâ€‘over.", "answer": "Wellington Cable Car â€” route and overbridge", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Wellington_Cable_Car_and_motorway.jpg", "focusX": 70, "focusY": 42, "zoom": 250}, {"id": "rainbow-crossing", "clue": "Painted pride where mall meets Dixon.", "answer": "Cuba Street Rainbow Crossing", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Rainbow_road_crossing.jpg", "focusX": 50, "focusY": 70, "zoom": 260}, {"id": "te-papa-exterior", "clue": "National stories behind patterned concrete.", "answer": "Te Papa Tongarewa â€” exterior", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Exterior_of_Te_Papa%2C_2016-01-25.jpg", "focusX": 28, "focusY": 18, "zoom": 520}, {"id": "mfc", "clue": "Concerts beneath timber curves and civic reflections.", "answer": "Michael Fowler Centre", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Michael_Fowler_Centre.jpg", "focusX": 62, "focusY": 22, "zoom": 480}, {"id": "railway-station-clock", "clue": "Where commuters watch the minutes.", "answer": "Wellington Railway Station â€” clock & facade", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Wellington_Railway_Station_%2814071819439%29.jpg", "focusX": 51, "focusY": 20, "zoom": 300}, {"id": "city-to-sea", "clue": "Carved forms guiding feet from civic to lagoon.", "answer": "City to Sea Bridge â€” Para Matchitt sculptures", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/City_to_Sea_MRD_03.jpg", "focusX": 55, "focusY": 40, "zoom": 300}, {"id": "mt-victoria-lookout", "clue": "Harbour views and windswept signage nearby.", "answer": "Mount Victoria Lookout â€” summit area", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Mt_Victoria_Lookout.jpg", "focusX": 55, "focusY": 35, "zoom": 260}, {"id": "carter-fountain", "clue": "Jet that listens to the Norâ€™Wester.", "answer": "Carter Fountain â€” Oriental Bay", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Carter_Fountain_in_Oriental_Bay.jpg", "focusX": 50, "focusY": 45, "zoom": 260}, {"id": "parliament-library", "clue": "Victorian Gothic beside the chamber.", "answer": "Parliamentary Library â€” rose/gothic windows", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Parliamentary_library%2C_Wellington.jpg", "focusX": 35, "focusY": 30, "zoom": 300}, {"id": "supreme-court", "clue": "Inside, timber facets echo a kauri cone.", "answer": "Supreme Court of New Zealand â€” building", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Supreme_court_july.JPG", "focusX": 60, "focusY": 40, "zoom": 260}, {"id": "cable-car-tunnel", "clue": "Pulses of light guide you uphill.", "answer": "Wellington Cable Car â€” tunnel approach", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Wellington_Cable_Car_Lambton_Quay_Terminal_June_2012.JPG", "focusX": 52, "focusY": 55, "zoom": 280}, {"id": "airport-gollum", "clue": "A hungry creature reaches for fish above departures.", "answer": "Wellington Airport â€” giant Gollum sculpture", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Giant_Gollum_sculpture_in_Wellington_Airport.jpg", "focusX": 60, "focusY": 32, "zoom": 620}, {"id": "st-gerards", "clue": "A clifftop landmark watching the harbour.", "answer": "St Gerardâ€™s Church and Monastery", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/St_Gerard%27s_Monastery%2C_Wellington%2C_2010.jpg", "focusX": 60, "focusY": 30, "zoom": 260}, {"id": "well_ngton", "clue": "Be the missing letter on the wharf.", "answer": "WELL_NGTON sign â€” Wellington waterfront", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Well_ngton_sculpture_2.jpg", "focusX": 55, "focusY": 55, "zoom": 270}, {"id": "roxy", "clue": "Artâ€‘deco glow in Miramar nights.", "answer": "Roxy Cinema â€” Miramar", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Roxy%2C_Miramar%2C_Wellington_%288489576892%29.jpg", "focusX": 42, "focusY": 28, "zoom": 520}, {"id": "matu-somes", "clue": "Innerâ€‘harbour light, first lit in 1866.", "answer": "Matiu / Somes Island â€” lighthouse", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Somes_Island_Lighthouse.jpg", "focusX": 70, "focusY": 50, "zoom": 280}, {"id": "botanic-sundial", "clue": "Time told by shadow among the roses.", "answer": "Wellington Botanic Garden â€” sundial", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Sundial_-_Wellington_Botanic_Garden_-_Wellington%2C_NZ_-_DSC09428.jpg", "focusX": 55, "focusY": 70, "zoom": 300}, {"id": "zealandia-valve-tower", "clue": "Gothic spire above a predatorâ€‘proof valley lake.", "answer": "Zealandia â€” lower reservoir valve tower", "url": "https://commons.wikimedia.org/wiki/Special:FilePath/Lower_reservoir_valve_tower%2C_Zealandia.jpg", "focusX": 65, "focusY": 40, "zoom": 300}];
    const DEFAULT_SECONDS = 30;
    let deck = [];
    let index = 0;
    let score = 0;
    let timerId = null;
    let seconds = DEFAULT_SECONDS;

    const crop = document.getElementById('crop');
    const clue = document.getElementById('clue');
    const ans = document.getElementById('answer');
    const progress = document.getElementById('progress');
    const scoreEl = document.getElementById('score');
    const timerEl = document.getElementById('timer');
    const timeupEl = document.getElementById('timeup');

    function shuffle(array) { const a = array.slice(); for (let i=a.length-1;i>0;i--) { const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }

    function setCrop(it) {
      crop.style.backgroundImage = `url('${it.url}')`;
      crop.style.backgroundPosition = `${it.focusX}% ${it.focusY}%`;
      crop.style.backgroundSize = `${it.zoom}% auto`;
    }

    function startTimer() {
      clearInterval(timerId);
      seconds = DEFAULT_SECONDS;
      timerEl.textContent = seconds + "s";
      timeupEl.style.display = 'none';
      timerId = setInterval(() => {
        seconds--;
        timerEl.textContent = seconds + "s";
        if (seconds <= 0) {
          clearInterval(timerId);
          timeupEl.style.display = 'inline';
        }
      }, 1000);
    }

    function stopAndResetTimer() {
      clearInterval(timerId);
      seconds = DEFAULT_SECONDS;
      timerEl.textContent = seconds + "s";
      timeupEl.style.display = 'none';
    }

    function show(i) {
      const it = deck[i];
      setCrop(it);
      clue.textContent = it.clue;
      ans.style.display = 'none';
      ans.innerHTML = "";
      progress.textContent = `${i+1} / ${deck.length}`;
      scoreEl.textContent = `Score: ${score}`;
      startTimer();
    }

    function next() {
      if (index < deck.length - 1) {
        index++; show(index);
      } else {
        clue.textContent = "Done! Hit Restart to shuffle again.";
        stopAndResetTimer();
      }
    }

    function reveal() {
      const it = deck[index];
      ans.style.display = ans.style.display === 'none' ? 'block' : 'none';
      ans.innerHTML = `<b>Answer:</b> ${it.answer}<br><a href="${it.url}" target="_blank" rel="noopener">Open the full image</a>`;
      // Reset the timer immediately on reveal as requested
      stopAndResetTimer();
    }

    function restart() {
      deck = shuffle(items);
      index = 0; score = 0; show(index);
    }

    document.addEventListener('keydown', (e) => {
      const k = e.key.toLowerCase();
      if (k === 'n') next();
      if (k === 'r') restart();
      if (k === 'h') clue.style.visibility = clue.style.visibility !== 'hidden' ? 'hidden' : 'visible';
      if (k === 's') { score++; scoreEl.textContent = `Score: ${score}`; }
    });
    document.getElementById('nextBtn').addEventListener('click', next);
    document.getElementById('revealBtn').addEventListener('click', reveal);
    document.getElementById('shuffleBtn').addEventListener('click', restart);
    restart();
  </script>
</body>
</html>
